{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { WebPlugin } from './index';\n\nvar StoragePluginWeb =\n/** @class */\nfunction (_super) {\n  __extends(StoragePluginWeb, _super);\n\n  function StoragePluginWeb() {\n    var _this = _super.call(this, {\n      name: 'Storage',\n      platforms: ['web']\n    }) || this;\n\n    _this.KEY_PREFIX = '_cap_';\n    return _this;\n  }\n\n  StoragePluginWeb.prototype.get = function (options) {\n    var _this = this;\n\n    return new Promise(function (resolve, _reject) {\n      resolve({\n        value: window.localStorage.getItem(_this.makeKey(options.key))\n      });\n    });\n  };\n\n  StoragePluginWeb.prototype.set = function (options) {\n    var _this = this;\n\n    return new Promise(function (resolve, _reject) {\n      window.localStorage.setItem(_this.makeKey(options.key), options.value);\n      resolve();\n    });\n  };\n\n  StoragePluginWeb.prototype.remove = function (options) {\n    var _this = this;\n\n    return new Promise(function (resolve, _reject) {\n      window.localStorage.removeItem(_this.makeKey(options.key));\n      resolve();\n    });\n  };\n\n  StoragePluginWeb.prototype.keys = function () {\n    var _this = this;\n\n    return new Promise(function (resolve, _reject) {\n      resolve({\n        keys: Object.keys(localStorage).filter(function (k) {\n          return _this.isKey(k);\n        }).map(function (k) {\n          return _this.getKey(k);\n        })\n      });\n    });\n  };\n\n  StoragePluginWeb.prototype.clear = function () {\n    var _this = this;\n\n    return new Promise(function (resolve, _reject) {\n      Object.keys(localStorage).filter(function (k) {\n        return _this.isKey(k);\n      }).forEach(function (k) {\n        return window.localStorage.removeItem(k);\n      });\n      resolve();\n    });\n  };\n\n  StoragePluginWeb.prototype.makeKey = function (key) {\n    return this.KEY_PREFIX + key;\n  };\n\n  StoragePluginWeb.prototype.isKey = function (key) {\n    return key.indexOf(this.KEY_PREFIX) === 0;\n  };\n\n  StoragePluginWeb.prototype.getKey = function (key) {\n    return key.substr(this.KEY_PREFIX.length);\n  };\n\n  return StoragePluginWeb;\n}(WebPlugin);\n\nexport { StoragePluginWeb };\nvar Storage = new StoragePluginWeb();\nexport { Storage };","map":{"version":3,"sources":["../../../src/web/storage.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __extends } from \"tslib\";\nimport { WebPlugin } from './index';\nvar StoragePluginWeb = /** @class */ (function (_super) {\n    __extends(StoragePluginWeb, _super);\n    function StoragePluginWeb() {\n        var _this = _super.call(this, {\n            name: 'Storage',\n            platforms: ['web']\n        }) || this;\n        _this.KEY_PREFIX = '_cap_';\n        return _this;\n    }\n    StoragePluginWeb.prototype.get = function (options) {\n        var _this = this;\n        return new Promise(function (resolve, _reject) {\n            resolve({\n                value: window.localStorage.getItem(_this.makeKey(options.key))\n            });\n        });\n    };\n    StoragePluginWeb.prototype.set = function (options) {\n        var _this = this;\n        return new Promise(function (resolve, _reject) {\n            window.localStorage.setItem(_this.makeKey(options.key), options.value);\n            resolve();\n        });\n    };\n    StoragePluginWeb.prototype.remove = function (options) {\n        var _this = this;\n        return new Promise(function (resolve, _reject) {\n            window.localStorage.removeItem(_this.makeKey(options.key));\n            resolve();\n        });\n    };\n    StoragePluginWeb.prototype.keys = function () {\n        var _this = this;\n        return new Promise(function (resolve, _reject) {\n            resolve({\n                keys: Object.keys(localStorage).filter(function (k) { return _this.isKey(k); }).map(function (k) { return _this.getKey(k); })\n            });\n        });\n    };\n    StoragePluginWeb.prototype.clear = function () {\n        var _this = this;\n        return new Promise(function (resolve, _reject) {\n            Object.keys(localStorage)\n                .filter(function (k) { return _this.isKey(k); })\n                .forEach(function (k) { return window.localStorage.removeItem(k); });\n            resolve();\n        });\n    };\n    StoragePluginWeb.prototype.makeKey = function (key) {\n        return this.KEY_PREFIX + key;\n    };\n    StoragePluginWeb.prototype.isKey = function (key) {\n        return key.indexOf(this.KEY_PREFIX) === 0;\n    };\n    StoragePluginWeb.prototype.getKey = function (key) {\n        return key.substr(this.KEY_PREFIX.length);\n    };\n    return StoragePluginWeb;\n}(WebPlugin));\nexport { StoragePluginWeb };\nvar Storage = new StoragePluginWeb();\nexport { Storage };\n//# sourceMappingURL=storage.js.map"]},"metadata":{},"sourceType":"module"}