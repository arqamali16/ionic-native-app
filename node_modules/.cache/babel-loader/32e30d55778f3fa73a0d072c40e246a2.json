{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { WebPlugin } from './index';\n\nvar LocalNotificationsPluginWeb =\n/** @class */\nfunction (_super) {\n  __extends(LocalNotificationsPluginWeb, _super);\n\n  function LocalNotificationsPluginWeb() {\n    var _this = _super.call(this, {\n      name: 'LocalNotifications',\n      platforms: ['web']\n    }) || this;\n\n    _this.pending = [];\n    return _this;\n  }\n\n  LocalNotificationsPluginWeb.prototype.createChannel = function (channel) {\n    throw new Error('Feature not available in the browser. ' + channel.id);\n  };\n\n  LocalNotificationsPluginWeb.prototype.deleteChannel = function (channel) {\n    throw new Error('Feature not available in the browser. ' + channel.id);\n  };\n\n  LocalNotificationsPluginWeb.prototype.listChannels = function () {\n    throw new Error('Feature not available in the browser');\n  };\n\n  LocalNotificationsPluginWeb.prototype.sendPending = function () {\n    var _this = this;\n\n    var toRemove = [];\n    var now = +new Date();\n    this.pending.forEach(function (localNotification) {\n      if (localNotification.schedule && localNotification.schedule.at) {\n        if (+localNotification.schedule.at <= now) {\n          _this.buildNotification(localNotification);\n\n          toRemove.push(localNotification);\n        }\n      }\n    });\n    console.log('Sent pending, removing', toRemove);\n    this.pending = this.pending.filter(function (localNotification) {\n      return !toRemove.find(function (ln) {\n        return ln === localNotification;\n      });\n    });\n  };\n\n  LocalNotificationsPluginWeb.prototype.sendNotification = function (localNotification) {\n    var _this = this;\n\n    var l = localNotification;\n\n    if (localNotification.schedule && localNotification.schedule.at) {\n      var diff = +localNotification.schedule.at - +new Date();\n      this.pending.push(l);\n      setTimeout(function () {\n        _this.sendPending();\n      }, diff);\n      return;\n    }\n\n    this.buildNotification(localNotification);\n  };\n\n  LocalNotificationsPluginWeb.prototype.buildNotification = function (localNotification) {\n    var l = localNotification;\n    return new Notification(l.title, {\n      body: l.body\n    });\n  };\n\n  LocalNotificationsPluginWeb.prototype.schedule = function (options) {\n    var _this = this;\n\n    var notifications = [];\n    options.notifications.forEach(function (notification) {\n      notifications.push(_this.sendNotification(notification));\n    });\n    return Promise.resolve({\n      notifications: options.notifications.map(function (notification) {\n        return {\n          id: '' + notification.id\n        };\n      })\n    });\n  };\n\n  LocalNotificationsPluginWeb.prototype.getPending = function () {\n    return Promise.resolve({\n      notifications: this.pending.map(function (localNotification) {\n        return {\n          id: '' + localNotification.id\n        };\n      })\n    });\n  };\n\n  LocalNotificationsPluginWeb.prototype.registerActionTypes = function (_options) {\n    throw new Error('Method not implemented.');\n  };\n\n  LocalNotificationsPluginWeb.prototype.cancel = function (pending) {\n    console.log('Cancel these', pending);\n    this.pending = this.pending.filter(function (localNotification) {\n      return !pending.notifications.find(function (ln) {\n        return ln.id === '' + localNotification.id;\n      });\n    });\n    return Promise.resolve();\n  };\n\n  LocalNotificationsPluginWeb.prototype.areEnabled = function () {\n    return Promise.resolve({\n      value: Notification.permission === 'granted'\n    });\n  };\n\n  LocalNotificationsPluginWeb.prototype.requestPermission = function () {\n    return new Promise(function (resolve) {\n      Notification.requestPermission(function (result) {\n        var granted = true;\n\n        if (result === 'denied' || result === 'default') {\n          granted = false;\n        }\n\n        resolve({\n          granted: granted\n        });\n      });\n    });\n  };\n\n  LocalNotificationsPluginWeb.prototype.requestPermissions = function () {\n    return new Promise(function (resolve, reject) {\n      Notification.requestPermission(function (result) {\n        if (result === 'denied' || result === 'default') {\n          reject(result);\n          return;\n        }\n\n        resolve({\n          results: [result]\n        });\n      });\n    });\n  };\n\n  return LocalNotificationsPluginWeb;\n}(WebPlugin);\n\nexport { LocalNotificationsPluginWeb };\nvar LocalNotifications = new LocalNotificationsPluginWeb();\nexport { LocalNotifications };","map":{"version":3,"sources":["../../../src/web/local-notifications.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __extends } from \"tslib\";\nimport { WebPlugin } from './index';\nvar LocalNotificationsPluginWeb = /** @class */ (function (_super) {\n    __extends(LocalNotificationsPluginWeb, _super);\n    function LocalNotificationsPluginWeb() {\n        var _this = _super.call(this, {\n            name: 'LocalNotifications',\n            platforms: ['web']\n        }) || this;\n        _this.pending = [];\n        return _this;\n    }\n    LocalNotificationsPluginWeb.prototype.createChannel = function (channel) {\n        throw new Error('Feature not available in the browser. ' + channel.id);\n    };\n    LocalNotificationsPluginWeb.prototype.deleteChannel = function (channel) {\n        throw new Error('Feature not available in the browser. ' + channel.id);\n    };\n    LocalNotificationsPluginWeb.prototype.listChannels = function () {\n        throw new Error('Feature not available in the browser');\n    };\n    LocalNotificationsPluginWeb.prototype.sendPending = function () {\n        var _this = this;\n        var toRemove = [];\n        var now = +new Date;\n        this.pending.forEach(function (localNotification) {\n            if (localNotification.schedule && localNotification.schedule.at) {\n                if (+localNotification.schedule.at <= now) {\n                    _this.buildNotification(localNotification);\n                    toRemove.push(localNotification);\n                }\n            }\n        });\n        console.log('Sent pending, removing', toRemove);\n        this.pending = this.pending.filter(function (localNotification) { return !toRemove.find(function (ln) { return ln === localNotification; }); });\n    };\n    LocalNotificationsPluginWeb.prototype.sendNotification = function (localNotification) {\n        var _this = this;\n        var l = localNotification;\n        if (localNotification.schedule && localNotification.schedule.at) {\n            var diff = +localNotification.schedule.at - +new Date;\n            this.pending.push(l);\n            setTimeout(function () {\n                _this.sendPending();\n            }, diff);\n            return;\n        }\n        this.buildNotification(localNotification);\n    };\n    LocalNotificationsPluginWeb.prototype.buildNotification = function (localNotification) {\n        var l = localNotification;\n        return new Notification(l.title, {\n            body: l.body\n        });\n    };\n    LocalNotificationsPluginWeb.prototype.schedule = function (options) {\n        var _this = this;\n        var notifications = [];\n        options.notifications.forEach(function (notification) {\n            notifications.push(_this.sendNotification(notification));\n        });\n        return Promise.resolve({\n            notifications: options.notifications.map(function (notification) { return { id: '' + notification.id }; })\n        });\n    };\n    LocalNotificationsPluginWeb.prototype.getPending = function () {\n        return Promise.resolve({\n            notifications: this.pending.map(function (localNotification) {\n                return {\n                    id: '' + localNotification.id\n                };\n            })\n        });\n    };\n    LocalNotificationsPluginWeb.prototype.registerActionTypes = function (_options) {\n        throw new Error('Method not implemented.');\n    };\n    LocalNotificationsPluginWeb.prototype.cancel = function (pending) {\n        console.log('Cancel these', pending);\n        this.pending = this.pending.filter(function (localNotification) { return !pending.notifications.find(function (ln) { return ln.id === '' + localNotification.id; }); });\n        return Promise.resolve();\n    };\n    LocalNotificationsPluginWeb.prototype.areEnabled = function () {\n        return Promise.resolve({\n            value: Notification.permission === 'granted'\n        });\n    };\n    LocalNotificationsPluginWeb.prototype.requestPermission = function () {\n        return new Promise(function (resolve) {\n            Notification.requestPermission(function (result) {\n                var granted = true;\n                if (result === 'denied' || result === 'default') {\n                    granted = false;\n                }\n                resolve({ granted: granted });\n            });\n        });\n    };\n    LocalNotificationsPluginWeb.prototype.requestPermissions = function () {\n        return new Promise(function (resolve, reject) {\n            Notification.requestPermission(function (result) {\n                if (result === 'denied' || result === 'default') {\n                    reject(result);\n                    return;\n                }\n                resolve({\n                    results: [result]\n                });\n            });\n        });\n    };\n    return LocalNotificationsPluginWeb;\n}(WebPlugin));\nexport { LocalNotificationsPluginWeb };\nvar LocalNotifications = new LocalNotificationsPluginWeb();\nexport { LocalNotifications };\n//# sourceMappingURL=local-notifications.js.map"]},"metadata":{},"sourceType":"module"}